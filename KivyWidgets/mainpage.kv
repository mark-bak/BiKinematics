#:kivy 1.11.1 

#general layout properties
#: set sidebar_width 420
#: set sidebar_coords_height 30
#: set topbar_height 50

<MainPage>:
    AnchorLayout:
        id: current_mode
        anchor_x: "left"
        anchor_y: "bottom"
        size_hint: None,None
        size: lbl.size 
        Label:
            id: lbl
            text: root.mode + root.info
            size: self.texture_size  
            
    AnchorLayout:     
        anchor_x: "right"
        anchor_y: "bottom"
        BoxLayout:
            orientation: "vertical"
            size_hint_x: None
            width: sidebar_width
            size_hint_y: None
            height: root.height - topbar_height
            BoxLayout: #Sidebar button layout
                id: points_list
                orientation: "vertical"
                size_hint_x: None
                width: sidebar_width
                canvas.after:
                    Color:
                        rgba: 1,1,1,1
                    Line:
                        points: [(self.x,self.y),(self.x,self.y+self.height)]
                #     Color:
                #         rgba: 1,0,0,0.5
                #     Rectangle:
                #         size: self.size
                #         pos: self.pos  
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y:None
                    height: sidebar_coords_height
                    Label:
                        text: "Point"
                    Label:
                        text: "Type"
                    Label:
                        text: "x_pos"
                    Label:
                        text: "y_pos" 

            BoxLayout:
                id: links_list
                orientation: "vertical"
                size_hint_x: None
                width: sidebar_width
                canvas.after:
                    Color:
                        rgba: 1,1,1,1
                    Line:
                        points: [(self.x,self.y),(self.x,self.y+self.height)]
                    # Color:
                    #     rgba: 0,1,0,0.5
                    # Rectangle:
                    #     size: self.size
                    #     pos: self.pos  
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y:None
                    height: sidebar_coords_height
                    Label:
                        text: "Link"
                    Label:
                        text: "Length"

    AnchorLayout: #Top button anchor      
        anchor_y: "top"
        anchor_x: "left"
        BoxLayout: #Topbar button layout
            size_hint_y: None
            height: topbar_height
            id: topbar
            orientation: "horizontal"
            # canvas.after:
            #     Color:
            #         rgba: 0,0,1,0.5
            #     Rectangle:
            #         size: self.size
            #         pos: self.pos

            TopbarButton:
                text: 'Load Geo Data'
                on_release: root.open_load_dialog()
            TopbarButton:
                text: 'Save Geo Data'
                on_release: root.open_save_dialog()
            TopbarButton:
                text: 'Load Image (wip)'
                on_release: 
            TopbarButton:
                text: 'Add Point'
                on_release: root.point_mode()
            TopbarButton:
                text: 'Add Link'
                on_release: root.link_mode()
            TopbarButton:
                text: 'Delete Point'
                on_release: root.delete_point_mode()
            TopbarButton:
                text: 'Delete Link'
                on_release: root.delete_link_mode()
            TopbarButton:
                text: 'Clear All'
                on_release: root.clear_all()

<TopbarButton@Button>:    